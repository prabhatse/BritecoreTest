<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="windows-1252" />
        <title>Class 21A MarketPlace</title>

        <meta name="description" content="overview &amp; stats" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <!--basic styles-->

        <link href="/static/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/static/assets/css/bootstrap-responsive.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="/static/assets/css/font-awesome.min.css" />
        <link rel="stylesheet" href="/static/assets/css/colorbox.css" />
        <script type="text/javascript"
  src="/MathJax/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
        <script type="text/javascript">
            window.jQuery || document.write("<script src='/static/assets/js/jquery-2.0.3.min.js'>" + "<" + "/script>");
        </script>
        <!--[if IE 7]>
          <link rel="stylesheet" href="/static/assets/css/font-awesome-ie7.min.css" />
        <![endif]-->

        <!--page specific plugin styles-->

        <!--fonts-->

        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300" />

        <!--ace styles-->

        <link rel="stylesheet" href="/static/assets/css/ace.min.css" />
        <link rel="stylesheet" href="/static/assets/css/ace-responsive.min.css" />
        <link rel="stylesheet" href="/static/assets/css/ace-skins.min.css" />
        <link rel="stylesheet" href="//cdn.datatables.net/1.10.7/css/jquery.dataTables.min.css" />
        
        <link rel="stylesheet" href="/static/colorbox.css" />

        <!--[if lte IE 8]>
          <link rel="stylesheet" href="/static/assets/css/ace-ie.min.css" />
        <![endif]-->

        <!--inline styles related to this page-->
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /></head>
<style type="text/css">
    #sidebar-right {
  position: fixed;
  width: 580px;
  /* overflow-y: scroll; */
  background: #2c3e50;
  background: rgba(44,62,80);
  color: #eee;
  height: 100%;
  top: 48px;
  right:0;
}

.hidden {
    display: none;
}
</style>

    <body>
        <div class="navbar">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a href="#" class="brand">
                        <small>
                            <i class="icon-leaf"></i>
                            Class 21A MarketPlace
                        </small>
                    </a><!--/.brand-->

                    <ul class="nav ace-nav pull-right">

                        <li class="light-blue">


                            <ul class="user-menu pull-right dropdown-menu dropdown-yellow dropdown-caret dropdown-closer">
                                <li>
                                    <a href="/admin/settings">
                                        <i class="icon-cog"></i>
                                        Settings
                                    </a>
                                </li>


                                <li>
                                    <a href="/admin/admins/edit/id/">
                                        <i class="icon-user"></i>
                                        Profile
                                    </a>
                                </li>

                                <li class="divider"></li>

                                <li>
                                    <a href="/admin/auth/logout">
                                        <i class="icon-off"></i>
                                        Logout
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul><!--/.ace-nav-->
                </div><!--/.container-fluid-->
            </div><!--/.navbar-inner-->
        </div>

        <div class="main-container container-fluid">
            <a class="menu-toggler" id="menu-toggler" href="/static/#">
                <span class="menu-text"></span>
            </a>

            <div class="sidebar" id="sidebar">
                <div class="sidebar-shortcuts" id="sidebar-shortcuts">


                    <div class="sidebar-shortcuts-mini" id="sidebar-shortcuts-mini">
                        <span class="btn btn-success"></span>

                        <span class="btn btn-info"></span>

                        <span class="btn btn-warning"></span>

                        <span class="btn btn-danger"></span>
                    </div>
                </div><!--#sidebar-shortcuts-->

                <ul class="nav nav-list">
                    <li class="active">
                        <a href="/admin">
                            <i class="icon-dashboard"></i>
                            <span class="menu-text"> Dashboard </span>
                        </a>
                    </li>

                    <li>
                        <a href="#" class="dropdown-toggle">
                            <i class="icon-desktop"></i>
                            <span class="menu-text"> Manage Doubt Nut </span>

                            <b class="arrow icon-angle-down"></b>
                        </a>

                        <ul class="submenu">
                            <li>
                                <a href="/admin/admins">
                                    <i class="icon-double-angle-right"></i>
                                    Admin
                                </a>
                            </li>

                            <li>
                                <a href="/admin/students">
                                    <i class="icon-double-angle-right"></i>
                                    Students
                                </a>
                            </li>

                            <li>
                                <a href="/admin/experts">
                                    <i class="icon-double-angle-right"></i>
                                    Experts
                                </a>
                            </li>

                             <li>
                                <a href="/admin/classes">
                                    <i class="icon-double-angle-right"></i>
                                    Classes
                                </a>
                            </li>


                            <li>
                                <a href="/admin/subjects">
                                    <i class="icon-double-angle-right"></i>
                                    Subjects
                                </a>
                            </li>

                            <li>
                                <a href="/admin/books">
                                    <i class="icon-double-angle-right"></i>
                                    Books
                                </a>
                            </li>
                            <li>
                                <a href="/admin/questions">
                                    <i class="icon-double-angle-right"></i>
                                    Questions
                                </a>
                            </li>

                            <li>
                                <a href="/admin/answers">
                                    <i class="icon-double-angle-right"></i>
                                    Answers
                                </a>
                            </li>

                            <li>
                                <a href="/admin/testimonials">
                                    <i class="icon-double-angle-right"></i>
                                    Testimonial
                                </a>
                            </li>

                            <li>
                                <a href="/admin/schemes">
                                    <i class="icon-double-angle-right"></i>
                                    Subscription Schemes
                                </a>
                            </li>                         

                            <li>
                                <a href="/admin/promo-coupons">
                                    <i class="icon-double-angle-right"></i>
                                    Promo Coupons
                                </a>
                            </li>  
                            <li>
                                <a href="/admin/notification">
                                    <i class="icon-double-angle-right"></i>
                                    Notifications
                                </a>
                            </li>

                            <li>
                                <a href="/admin/skip-messages">
                                    <i class="icon-double-angle-right"></i>
                                    Skip Messages
                                </a>
                            </li>
                            <li>
                                <a href="/admin/skip-questions">
                                    <i class="icon-double-angle-right"></i>
                                    Skipped Questions
                                </a>
                            </li>

                            <li>
                                <a href="/admin/transactions">
                                    <i class="icon-double-angle-right"></i>
                                    Last Month Transactions
                                </a>
                            </li>                         

                            <li>
                                <a href="/admin/video-stats">
                                    <i class="icon-double-angle-right"></i>
                                    Video Stats
                                </a>
                            </li>  

                            <li>
                                <a href="/admin/vendors">
                                    <i class="icon-double-angle-right"></i>
                                    Vendors
                                </a>
                            </li>    


                        </ul>
                    </li>

                    <li>
                        <a href="#" class="dropdown-toggle">
                            <i class="icon-desktop"></i>
                            <span class="menu-text"> Manage Class Zoo </span>

                            <b class="arrow icon-angle-down"></b>
                        </a>

                        <ul class="submenu">


                            <li>
                                <a href="/admin/class-schedule">
                                    <i class="icon-double-angle-right"></i>
                                    Class Schedule
                                </a>
                            </li>

                            <li>
                                <a href="/admin/class-feedback">
                                    <i class="icon-double-angle-right"></i>
                                    Class Feedback
                                </a>
                            </li>

                            <li>
                                <a href="/admin/classroom-attributes">
                                    <i class="icon-double-angle-right"></i>
                                    Classroom Attributes
                                </a>
                            </li>
                            <li>
                                <a href="/admin/class-chapter-topics">
                                    <i class="icon-double-angle-right"></i>
                                    Class Chapter Topics
                                </a>
                            </li>


                            <li>
                                <a href="/admin/courses">
                                    <i class="icon-double-angle-right"></i>
                                    Courses
                                </a>
                            </li>
                            <li>
                                <a href="/admin/course-subtopics">
                                    <i class="icon-double-angle-right"></i>
                                    Course Subtopics
                                </a>
                            </li>
                            <li>
                                <a href="/admin/course-enrollments">
                                    <i class="icon-double-angle-right"></i>
                                    Course Enrollments
                                </a>
                            </li>
                            <li>
                                <a href="/admin/coupons/generate">
                                    <i class="icon-double-angle-right"></i>
                                    Generate Vendor Coupons
                                </a>
                            </li>
                            <li>
                                <a href="/admin/facilities">
                                    <i class="icon-double-angle-right"></i>
                                    Facilities
                                </a>
                            </li>
                            
                            <li>
                                <a href="/admin/facility-attributes">
                                    <i class="icon-double-angle-right"></i>
                                    Facility Attributes
                                </a>
                            </li>
                     <li>
                                <a href="/admin/facility-classrooms">
                                    <i class="icon-double-angle-right"></i>
                                    Facility Classroom 
                                </a>
                            </li>

                           
                             <li>
                                <a href="/admin/location-mappings">
                                    <i class="icon-double-angle-right"></i>
                                    Location Mappings
                                </a>
                            </li>
                           
 


                        </ul>
                    </li>
                    
                    
                     <li>
                        <a href="#" class="dropdown-toggle">
                            <i class="icon-desktop"></i>
                            <span class="menu-text"> Manage Masters </span>

                            <b class="arrow icon-angle-down"></b>
                        </a>

                        <ul class="submenu">
                            
                            <li>
                                <a href="/admin/class-schedule">
                                    <i class="icon-double-angle-right"></i>
                                    Class Schedule
                                </a>
                            </li>
                        </ul>
                         
                     </li>
                     <li>
                        <a href="#" class="dropdown-toggle">
                            <i class="icon-desktop"></i>
                            <span class="menu-text"> Manage Question Corpus </span>

                            <b class="arrow icon-angle-down"></b>
                        </a>

                        <ul class="submenu">
                            
                            <li>
                                <a href="/admin/corpus/parsed-question">
                                    <i class="icon-double-angle-right"></i>
                                    Parsed Questions
                                </a>
                            </li>
                            <li>
                                <a href="/admin/corpus/upload-file">
                                    <i class="icon-double-angle-right"></i>
                                    Upload File
                                </a>
                            </li>
                        </ul>
                         
                     </li>
                </ul><!--/.nav-list-->

                <div class="sidebar-collapse" id="sidebar-collapse">
                    <i class="icon-double-angle-left"></i>
                </div>
            </div>

            <div class="main-content">
                <div class="breadcrumbs" id="breadcrumbs">
                    <ul class="breadcrumb">
                        <li>
                            <i class="icon-home home-icon"></i>
                            <a href="/admin">Home</a>

                            <span class="divider">
                                <i class="icon-angle-right arrow-icon"></i>
                            </span>
                        </li>
                        <li class="active">Dashboard</li>
                    </ul><!--.breadcrumb-->


                </div>

                <div class="page-content">
                    {% if hasMessage %}
    <div class="row">
        <div class="col-sm-12">
            <div class="alert alert-block alert-{{messageType }} fade in">
                <button data-dismiss="alert" class="close close-sm" type="button">
                    <i class="fa fa-times"></i>
                </button>
                {% if messageType == 'danger' %}
                    <strong>Oh snap!</strong>
                {% elif messageType == 'success' %}
                    <strong>Well done!</strong>
                {% elif messageType == 'info' %}
                    <strong>Heads up!</strong>
                {% elif messageType == 'warning' %}
                    <strong>Warning!</strong>
                {% endif %}
                {{ message }}
            </div>
        </div>
    </div>
{% endif %}

<section class="panel panel-default">
    <header class="panel-heading font-bold"> Add Promo Coupons </header><br />     
    <div class="panel-body">
        <form class="form-horizontal" method="post">

                            <div class="control-group">
                        <label for="coupon_code" class="control-label required">Promo Code*</label>
<div class="controls">
<input name="coupon_code" id="coupon_code" value="" placeholder="Enter Code" class="form-control" type="text"></div>                </div>
                
                            <div class="control-group">
                        <label for="coupon_type" class="control-label required">Coupon Type*</label>
<div class="controls">
<select name="coupon_type" id="coupon_type" class="form-control">
    <option value="" selected="selected">Select Type</option>
    <option value="1">Silver Points</option>
    <option value="2">Gold Points</option>
</select></div>                </div>
                
                            <div class="control-group">
                        <label for="coupon_value" class="control-label required">Coupon Value*</label>
<div class="controls">
<input name="coupon_value" id="coupon_value" value="" placeholder="Enter Coupon Value" class="form-control" type="text"></div>                </div>
                
             
                <div class="control-group" style="">
                        <label for="valid_from" class="control-label required">Valid From*</label>
<div class="controls">
<input name="valid_from" id="valid_from" value="" placeholder="Valid From" class="form-control hasDatepicker" type="text"></div>                </div>
                
                            <div class="control-group">
                        <label for="valid_to" class="control-label required">Valid To*</label>
<div class="controls">
<input name="valid_to" id="valid_to" value="" placeholder="Valid To" class="form-control hasDatepicker" type="text"></div>                </div>
                
                            <div class="control-group">
                        <label for="coupon_status" class="control-label required">Coupon Status*</label>
<div class="controls">
<select name="coupon_status" id="coupon_status" class="form-control">
    <option value="" selected="selected">Select Status</option>
    <option value="1">Active</option>
    <option value="0">Deactive</option>
</select></div>                </div>
   
            
            <div class="col-sm-4 col-sm-offset-2"> 
                <button type="submit" class="btn btn-primary" value="Add Coupon">Add</button> 
            </div>               
        </form>
    </div>
</section>

<section class="panel panel-default">
    <header class="panel-heading"> All Promo Coupons </header>
    <div class="table-responsive">
        <table class="table table-striped b-t b-light text-sm myTable">
            <thead>
                <tr>
                    <th>Promo Id</th>
                    <th>Promo Code</th>              
                    <th>Value</th>
                    <th>Valid From</th>
                    <th>Valid To</th>
                    <th>Type</th>
                    <th>Created On</th>                    
                    <th>Status</th>
                    <th>Options</th>
                </tr>
            </thead>
            <tbody>
                {% if coupons %}
                    {% for coupon in coupons %}
                        <tr>
                            <td>{{ coupon["coupon_id"] }}</td>
                            <td>{{ coupon["coupon_code"] }}</td>
                            <td>{{ coupon["coupon_value"] }}</td>
                            <td>{{ coupon["valid_from"] }}</td>
                            <td>{{ coupon["valid_to"] }}</td>
                            <td>{{ "Silver Points"}}</td>
                            <td>{{ coupon["created_on"] }}</td>
                            <td>{{ "Status"}}</td>                            
                            <td>{{ "Options"}}</td>                            
                            <td>
                                
                                <a href="/admin/promo-coupons/edit/id/"><button class="btn btn-warning btn-mini"><i class="icon-wrench  bigger-110 icon-only"></i></button></a>
                                <!--a href="#" data-id="{{ coupon["coupon_id"] }}"  class="delete"><button class="btn btn-grey btn-mini"><i class="icon-trash  icon-only"></i></button></a-->
                            </td>
                        </tr>
                    {% endfor %}
                {% endif %}

            </tbody>
        </table>
    </div>

</section>
<div class="modal fade in" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" style="display:none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <form method="post">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                    <h4 class="modal-title" id="myModalLabel">Confirm Delete</h4>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <input type="hidden" name="request_type" value="delete"/>
                    <input type="hidden" name="id" id="delete_id" value=""/>
                    <button type="submit" class="btn btn-primary btn-danger">Confirm Delete</button>
                </div>
            </form>
        </div><!-- modal-content -->
    </div><!-- modal-dialog -->
</div>

                </div><!--/.page-content-->


            </div><!--/.main-content-->
        </div><!--/.main-container-->

        <a href="/static/#" id="btn-scroll-up" class="btn-scroll-up btn btn-small btn-inverse">
            <i class="icon-double-angle-up icon-only bigger-110"></i>
        </a>

        <!--basic scripts-->

        <!--[if !IE]>-->
        
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

        <!--<![endif]-->

        <!--[if IE]>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<![endif]-->

        <!--[if !IE]>-->



        <!--<![endif]-->

        <!--[if IE]>
<script type="text/javascript">
window.jQuery || document.write("<script src='assets/js/jquery-1.10.2.min.js'>"+"<"+"/script>");
</script>
<![endif]-->

        <script type="text/javascript">
            if ("ontouchend" in document)
                document.write("<script src='/static/assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
        </script>
        <script src="/static/assets/js/bootstrap.min.js"></script>

        <!--page specific plugin scripts-->

        <!--[if lte IE 8]>
          <script src="/static/assets/js/excanvas.min.js"></script>
        <![endif]-->

        <script src="/static/assets/js/jquery.colorbox-min.js"></script>
        <script src="/static/assets/js/jquery-ui-1.10.3.custom.min.js"></script>
        <script src="/static/assets/js/jquery.ui.touch-punch.min.js"></script>
        <script src="/static/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/static/assets/js/jquery.easy-pie-chart.min.js"></script>
        <script src="/static/assets/js/jquery.sparkline.min.js"></script>
        <script src="/static/assets/js/flot/jquery.flot.min.js"></script>
        <script src="/static/assets/js/flot/jquery.flot.pie.min.js"></script>
        <script src="/static/assets/js/flot/jquery.flot.resize.min.js"></script>
        <script src="/static/assets/js/flot/jquery.flot.resize.min.js"></script>
        <link rel="stylesheet" href="/static/assets/css/jquery.timepicker.css" />
        <script src="/static/assets/js/jquery.timepicker.js"></script>
        <script src="/static/assets/js/jquery.timepicker.min.js"></script>
        <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
 
        <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
        <!--ace scripts-->

<!--        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>-->
        <script src="/static/jquery.colorbox.js"></script>
        <script>
            $(document).ready(function(){
                //Examples of how to assign the Colorbox event to elements
                $(".group1").colorbox({rel:'group1'});

                //Example of preserving a JavaScript event for inline calls.
                $("#click").click(function(){ 
                    $('#click').css({"background-color":"#f00", "color":"#fff", "cursor":"inherit"}).text("Open this window again and this message will still be here.");
                    return false;
                });
            });
        </script>
        
        <script>
            $('#date').change(function(){        
                $("#class_duration").val('NA');
            });
            $('#repeat_class').click(function(){            
                if (!$(this).is(':checked')) {
                    $("#class_duration").val('NA'); 
                }
            });
            $('#date').datepicker({dateFormat: 'yy-mm-dd'});
            $('#valid_from').datepicker({dateFormat: 'dd-mm-yy'});
            $('#valid_to').datepicker({dateFormat: 'dd-mm-yy'});
            $('#time_from').timepicker({ timeFormat: 'H:i:s' });
            $('#time_to').timepicker({ timeFormat: 'H:i:s' });
    
            $("#class_duration").attr('readonly','readonly');
            $('#time_from').change(function(){        
                var d1=$(this).val();
                var d2=$('#time_to').val();

                var timeStart = new Date("01/01/2007 " + d1).getHours();
                var min = new Date("01/01/2007 " + d1).getMinutes();
                var timeEnd = new Date("01/01/2007 " + d2).getHours();
                var min2 = new Date("01/01/2007 " + d2).getMinutes();
                var t2=timeStart+"."+min;
                var t1=timeEnd+"."+min2;
                var hourDiff = timeEnd - timeStart;  
                var t = t1 - t2;  
                var time=t=t.toFixed(2);  

                if(time%1 === 0){

                } else {
                    t=t-0.20;
                }
                $("#class_duration").val(t);
            });
    
            $('#time_to').change(function(){
                var d2=$(this).val();
                var d1=$('#time_from').val();
        
                var timeStart = new Date("01/01/2007 " + d1).getHours();
                var min = new Date("01/01/2007 " + d1).getMinutes();
                var timeEnd = new Date("01/01/2007 " + d2).getHours();
                var min2 = new Date("01/01/2007 " + d2).getMinutes();
                var t2=timeStart+"."+min;
                var t1=timeEnd+"."+min2;
                var hourDiff = timeEnd - timeStart;  
                var t = t1 - t2;  
                var time=t=t.toFixed(2);  
     
                if(time%1 === 0){
             
                } else {
                    t=t-0.20;
                }
                $("#class_duration").val(t);
            });        
        </script>
        
        <script type="text/javascript">
            $(function() {
                var colorbox_params = {
                    reposition:true,
                    scalePhotos:true,
                    scrolling:false,
                    previous:'<i class="icon-arrow-left"></i>',
                    next:'<i class="icon-arrow-right"></i>',
                    close:'&times;',
                    current:'{current} of {total}',
                    maxWidth:'100%',
                    maxHeight:'100%',
                    onOpen:function(){
                            document.body.style.overflow = 'hidden';
                    },
                    onClosed:function(){
                            document.body.style.overflow = 'auto';
                    },
                    onComplete:function(){
                            $.colorbox.resize();
                    }
                };

            $('.ace-thumbnails [data-rel="colorbox"]').colorbox(colorbox_params);
            $("#cboxLoadingGraphic").append("<i class='icon-spinner orange'></i>");//let's add a custom loading icon

            /**$(window).on('resize.colorbox', function() {
                    try {
                            //this function has been changed in recent versions of colorbox, so it won't work
                            $.fn.colorbox.load();//to redraw the current frame
                    } catch(e){}
            });*/
            })
        </script>
        
        <script src="/static/assets/js/ace-elements.min.js"></script>
        <script src="/static/assets/js/ace.min.js"></script>
        <script type="text/javascript" src="//cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script>
        
        <!--inline scripts related to this page-->
        <script>            
//            $(document).ready(function(){
//                $('.myTable').DataTable();
//            });
            
            $(document).ready(function() {
                $('.myTable').dataTable( {
                    "order": [[ 0, "desc" ]]
                } );
            } );
            
            $("#repeat_class").click(function() {
                if (document.getElementById("repeat_class").checked) {
                    $(".start_date").show();
                    $(".end_date").show();
                    $(".day_check").show();
                    $(".date1").hide();
                }
                else {
                    $(".day_check").hide();
                    $(".start_date").hide();
                    $(".end_date").hide();
                    $(".date1").show();
                }
            });
        </script>
        
        <script type="text/javascript">
            $(function() {
                $('.easy-pie-chart.percentage').each(function() {
                    var $box = $(this).closest('.infobox');
                    var barColor = $(this).data('color') || (!$box.hasClass('infobox-dark') ? $box.css('color') : 'rgba(255,255,255,0.95)');
                    var trackColor = barColor == 'rgba(255,255,255,0.95)' ? 'rgba(255,255,255,0.25)' : '#E2E2E2';
                    var size = parseInt($(this).data('size')) || 50;
                    $(this).easyPieChart({
                        barColor: barColor,
                        trackColor: trackColor,
                        scaleColor: false,
                        lineCap: 'butt',
                        lineWidth: parseInt(size / 10),
                        animate: /msie\s*(8|7|6)/.test(navigator.userAgent.toLowerCase()) ? false : 1000,
                        size: size
                    });
                })

                $('.sparkline').each(function() {
                    var $box = $(this).closest('.infobox');
                    var barColor = !$box.hasClass('infobox-dark') ? $box.css('color') : '#FFF';
                    $(this).sparkline('html', {tagValuesAttribute: 'data-values', type: 'bar', barColor: barColor, chartRangeMin: $(this).data('min') || 0});
                });

                var placeholder = $('#piechart-placeholder').css({'width': '90%', 'min-height': '150px'});
                var data = [
                    {label: "social networks", data: 38.7, color: "#68BC31"},
                    {label: "search engines", data: 24.5, color: "#2091CF"},
                    {label: "ad campaings", data: 8.2, color: "#AF4E96"},
                    {label: "direct traffic", data: 18.6, color: "#DA5430"},
                    {label: "other", data: 10, color: "#FEE074"}
                ]
                
                function drawPieChart(placeholder, data, position) {
                    $.plot(placeholder, data, {
                        series: {
                            pie: {
                                show: true,
                                tilt: 0.8,
                                highlight: {
                                    opacity: 0.25
                                },
                                stroke: {
                                    color: '#fff',
                                    width: 2
                                },
                                startAngle: 2
                            }
                        },
                        legend: {
                            show: true,
                            position: position || "ne",
                            labelBoxBorderColor: null,
                            margin: [-30, 15]
                        }
                        ,
                        grid: {
                            hoverable: true,
                            clickable: true
                        }
                    })
                }
                drawPieChart(placeholder, data);

                /**
                 we saved the drawing function and the data to redraw with different position later when switching to RTL mode dynamically
                 so that's not needed actually.
                 */
                placeholder.data('chart', data);
                placeholder.data('draw', drawPieChart);

                var $tooltip = $("<div class='tooltip top in hide'><div class='tooltip-inner'></div></div>").appendTo('body');
                var previousPoint = null;

                placeholder.on('plothover', function(event, pos, item) {
                    if (item) {
                        if (previousPoint != item.seriesIndex) {
                            previousPoint = item.seriesIndex;
                            var tip = item.series['label'] + " : " + item.series['percent'] + '%';
                            $tooltip.show().children(0).text(tip);
                        }
                        $tooltip.css({top: pos.pageY + 10, left: pos.pageX + 10});
                    } else {
                        $tooltip.hide();
                        previousPoint = null;
                    }
                });

                var d1 = [];
                for (var i = 0; i < Math.PI * 2; i += 0.5) {
                    d1.push([i, Math.sin(i)]);
                }

                var d2 = [];
                for (var i = 0; i < Math.PI * 2; i += 0.5) {
                    d2.push([i, Math.cos(i)]);
                }

                var d3 = [];
                for (var i = 0; i < Math.PI * 2; i += 0.2) {
                    d3.push([i, Math.tan(i)]);
                }

                var sales_charts = $('#sales-charts').css({'width': '100%', 'height': '220px'});
                $.plot("#sales-charts", [
                    {label: "Domains", data: d1},
                    {label: "Hosting", data: d2},
                    {label: "Services", data: d3}
                ], {
                    hoverable: true,
                    shadowSize: 0,
                    series: {
                        lines: {show: true},
                        points: {show: true}
                    },
                    xaxis: {
                        tickLength: 0
                    },
                    yaxis: {
                        ticks: 10,
                        min: -2,
                        max: 2,
                        tickDecimals: 3
                    },
                    grid: {
                        backgroundColor: {colors: ["#fff", "#fff"]},
                        borderWidth: 1,
                        borderColor: '#555'
                    }
                });

                $('#recent-box [data-rel="tooltip"]').tooltip({placement: tooltip_placement});
                function tooltip_placement(context, source) {
                    var $source = $(source);
                    var $parent = $source.closest('.tab-content')
                    var off1 = $parent.offset();
                    var w1 = $parent.width();

                    var off2 = $source.offset();
                    var w2 = $source.width();

                    if (parseInt(off2.left) < parseInt(off1.left) + parseInt(w1 / 2))
                        return 'right';
                    return 'left';
                }

                $('.dialogs,.comments').slimScroll({
                    height: '300px'
                });

                //Android's default browser somehow is confused when tapping on label which will lead to dragging the task
                //so disable dragging when clicking on label
                var agent = navigator.userAgent.toLowerCase();
                if ("ontouchstart" in document && /applewebkit/.test(agent) && /android/.test(agent))
                    $('#tasks').on('touchstart', function(e) {
                        var li = $(e.target).closest('#tasks li');
                        if (li.length == 0)
                            return;
                        var label = li.find('label.inline').get(0);
                        if (label == e.target || $.contains(label, e.target))
                            e.stopImmediatePropagation();
                    });

                $('#tasks').sortable({
                    opacity: 0.8,
                    revert: true,
                    forceHelperSize: true,
                    placeholder: 'draggable-placeholder',
                    forcePlaceholderSize: true,
                    tolerance: 'pointer',
                    stop: function(event, ui) {//just for Chrome!!!! so that dropdowns on items don't appear below other items after being moved
                        $(ui.item).css('z-index', 'auto');
                    }
                });
                $('#tasks').disableSelection();
                $('#tasks input:checkbox').removeAttr('checked').on('click', function() {
                    if (this.checked)
                        $(this).closest('li').addClass('selected');
                    else
                        $(this).closest('li').removeClass('selected');
                });
            })
        </script>
        
        <script>
            $(".delete").click(function(e) {
                e.preventDefault();
                var id = $(this).attr("data-id");
                $("#delete_id").val(id);
                $("#myModal").modal('show');
            });
            $(".accept_skip").click(function(e) {
                e.preventDefault();
                var id = $(this).attr("data-id");
                $("#accept_id").val(id);
                $("#acceptModal").modal('show');
            });
            $(".reject_skip").click(function(e) {
                e.preventDefault();
                var id = $(this).attr("data-id");
                $("#reject_id").val(id);
                $("#rejectModal").modal('show');
            });
            $(".notify").click(function(e) {
                e.preventDefault();
                var id = $(this).attr("data-id");
//                console.log(id);
                $("#notify_me").val(id);
                $("#myModal_1").modal('show');
            });
            $(".approve").click(function(e) {
                e.preventDefault();
                var id = $(this).attr("data-id");
                $("#approve_id").val(id);
                $("#myModal_approve").modal('show');
            });
            $(".reject").click(function(e) {
                e.preventDefault();
                var id = $(this).attr("data-id");
                $("#reject_id").val(id);
                $("#myModal_reject").modal('show');
            });
            $('#matched_question').click(function(){
                if($('#sidebar-right').hasClass('open')) {
                    $('#sidebar-right').removeClass('open');
                    $('#sidebar-right').addClass('hidden');
                } else {
                    $('#sidebar-right').addClass('open');
                    $('#sidebar-right').removeClass('hidden');
                }
            });
            $(".class_name").change(function() {
                var class_name = $(this).val();

                $.ajax({
                    url: "/admin/ajax/get-subjects-name",
                    data: {class_name: class_name}

                }).done(function(msg) {
                    var obj = jQuery.parseJSON(msg);

                    var string = "<select name='subject_name' class='form-control subject_name'>";
                    $.each(obj.data, function(i, v) {
                        string += "<option value='" + v.subject_name + "'>" + v.subject_name + "</option>";
                    });
                    string += "</select>"
                    $(".subject_name").html(string);
                });
            });
        </script>

        <script type="text/javascript">
            $("#assign").click(function() {
                var expert_id = $(this).attr("value");
                var question_id = $(this).attr("name");

                $.ajax({
                    url: "/admin/ajax/insert-into-questions",
                    data: {expert_id: expert_id, question_id: question_id},
                    beforeSend: function() {
                        $("#assign").text("Assigning...");
                    },
                }).done(function(data) {
                    if (data) {
                        $("#assign").text("Assigned");

                    }

                });
            });


            $(".apend_subtopic").click(function(e) {
                e.preventDefault();
                var string = "<div class='control-group'>";
                string += "<label for='course_grade_benchmark' class='control-label'>SubTopic</label>";
                string += "<div class='controls'>";
                string += "<input type='text' name='subtopic[]'  placeholder='Enter Subtopic' class='form-control'>";
                string+= "<button type='button' class='btn btn-primary btn-xs' onClick='cancel(this)'>Delete</button>";
                string += "</div>";
                string += "</div>";
                //alert(string);

                $(".append").append(string);
                //$(".show").show();
            });
            
            function cancel(event) {
                var obj = $(event);
                obj.parent().parent().remove();
            }
        </script>
                
        
    </body>
</html>
